"use strict";angular.module("weatherApp",["ngAnimate","ngCookies","ngRoute","ngTouch"]).config(["$routeProvider",function(a){a.when("/",{templateUrl:"views/weather.html",controller:"WeatherCtrl"})}]),angular.module("weatherApp").controller("WeatherCtrl",["weather",function(a){var b=this;this.query="Jersey City",this.showForm=!1,this.cities=[],this.columns=3,this.colSpan=12/this.columns,this.cityRows=[],this.roomForButton=!0,this.search=function(){a.search(b.query,function(a){b.cities.push(a),b.query="",b.showForm=!1,b.organizeRows()})},this.organizeRows=function(){var a=[];b.cityRows=[];var c=b.columns-1,d=b.cities.length;b.cities.forEach(function(e,f){var g=f%b.columns;a.push(e),(g===c||f==d-1)&&(b.cityRows.push(a),a=[])});var e=b.cityRows[b.cityRows.length-1];this.roomForButton=e.length<b.columns},this.toggleForm=function(){b.showForm=!b.showForm},this.search()}]),angular.module("weatherApp").service("weather",["$http",function(a){this.search=function(b,c){var d="https://query.yahooapis.com/v1/public/yql?q=select%20*%20from%20weather.forecast%20where%20woeid%20in%20(select%20woeid%20from%20geo.places(1)%20where%20text%3D%22"+b+"%22)&format=json&env=store%3A%2F%2Fdatatables.org%2Falltableswithkeys";a.get(d).then(function(a){var b=a.data.query.results.channel,d={};d.name=b.location.city,d.state=b.location.region,d.img=b.item.description.match('img src="(.*)"')[1],d.temp=b.item.condition.temp,d.text=b.item.condition.text,c(d)})}}]),angular.module("weatherApp").directive("citySummary",function(){return{templateUrl:"views/city-summary.html",restrict:"A",scope:{city:"="}}}),angular.module("weatherApp").directive("addCity",function(){return{templateUrl:"views/new-city.html",restrict:"A",scope:!0}});